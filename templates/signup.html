<div class="signup-container">
    <h2>Create Account</h2>

    {% if messages %}
        <ul class="messages">
            {% for message in messages %}
            <li class="{{ message.tags }}">{{ message }}</li>
            {% endfor %}
        </ul>
    {% endif %}

    <div class="role-tabs">
        <button type="button" class="role-tab active" onclick="setRole('organizer')">Organizer</button>
        <button type="button" class="role-tab" onclick="setRole('vendor')">Vendor</button>
        <button type="button" class="role-tab" onclick="setRole('attendee')">Attendee</button>
    </div>

    <form method="POST" action="{% url 'signup' %}" enctype="multipart/form-data">
        {% csrf_token %}

        <input type="hidden" name="role" id="selected-role" value="organizer">

        <div id="signup-dynamic-fields">
            </div>

        <button type="submit" class="btn-primary">Sign Up</button>
    </form>
</div>

<script>
    // Define the HTML for each role (Matches forms.py names)
    const roleTemplates = {
        organizer: `
            <input type="text" name="name" placeholder="Full Name" required>
            <input type="email" name="email" placeholder="Email Address" required>
            <input type="text" name="phone_number" placeholder="Phone Number" required>
            <input type="password" name="password1" placeholder="Password" required>
            <input type="password" name="password2" placeholder="Confirm Password" required>
        `,
        vendor: `
            <input type="text" name="name" placeholder="Organization Name" required>
            <input type="email" name="email" placeholder="Email" required>
            <input type="text" name="service_type" placeholder="Service Type" required>
            <input type="text" name="phone_number" placeholder="Phone" required>
            <input type="password" name="password1" placeholder="Password" required>
            <input type="password" name="password2" placeholder="Confirm Password" required>
        `,
        attendee: `
            <input type="text" name="username" placeholder="Username" required>
            <input type="text" name="name" placeholder="Full Name" required>
            <input type="email" name="email" placeholder="Email" required>
            <input type="text" name="phone_number" placeholder="Phone" required>
            <input type="password" name="password1" placeholder="Password" required>
            <input type="password" name="password2" placeholder="Confirm Password" required>
        `
    };

    function setRole(role) {
        // 1. Update Hidden Input
        document.getElementById('selected-role').value = role;

        // 2. Render Fields
        document.getElementById('signup-dynamic-fields').innerHTML = roleTemplates[role];

        // 3. Update Tab Styling (Optional logic to highlight active button)
        document.querySelectorAll('.role-tab').forEach(btn => btn.classList.remove('active'));
        event.target.classList.add('active');
    }

    // Initialize
    document.addEventListener('DOMContentLoaded', () => setRole('organizer'));
</script>